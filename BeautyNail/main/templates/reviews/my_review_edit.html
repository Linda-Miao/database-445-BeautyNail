{% extends 'base.html' %}
{% block title %}Edit Review | BeautyNailNet{% endblock %}
{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
  <div>
    <h2 class="text-center mb-4">Edit Review</h2>

    <table class="mb-3">
      <tr><td><strong>Appointment:</strong></td><td>#{{ appt.appointment_id }}</td></tr>
      <tr><td><strong>Date:</strong></td><td>{{ appt.appointment_date }}</td></tr>
      <tr><td><strong>Time:</strong></td><td>{{ appt.start_time|time:"g:i A" }} – {{ appt.end_time|time:"g:i A" }}</td></tr>
    </table>

    <form method="post" action="{% url 'my_review_edit' item.review_id %}">
      {% csrf_token %}
      <table>
        <tr>
          <td><label for="rating">Rating (1–5):</label></td>
          <td>
            <select id="rating" name="rating" required>
              <option value="">-- Select --</option>
              <option value="5" {% if item.rating == 5 %}selected{% endif %}>5</option>
              <option value="4" {% if item.rating == 4 %}selected{% endif %}>4</option>
              <option value="3" {% if item.rating == 3 %}selected{% endif %}>3</option>
              <option value="2" {% if item.rating == 2 %}selected{% endif %}>2</option>
              <option value="1" {% if item.rating == 1 %}selected{% endif %}>1</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="comment">Comment:</label></td>
          <td><textarea id="comment" name="comment" rows="3">{{ item.comment|default:'' }}</textarea></td>
        </tr>
      </table>

      <div class="mt-3 text-center">
        <button type="submit" class="btn btn-primary">Update Review</button>
        <a href="{% url 'my_appointments' %}" class="btn btn-secondary ms-2">Cancel</a>

        
        <button type="submit"
          class="btn btn-danger ms-2"
          formaction="{% url 'my_review_delete' item.review_id %}"
          formmethod="post"
          formnovalidate
          onclick="return confirm('Delete this review? This cannot be undone.');">
          Delete Review
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
